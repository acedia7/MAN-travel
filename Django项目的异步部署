

MAN游项目
详细设计说明书











 
文档修订记录

序号	版本号	修改时间	修改人	审核人	批准人	备注
1	v1.0	2024-10-28	施宇翔	施宇翔		系统架构、接口设计
2	v1.1	2024-10-29	刘宇杰	施宇翔		引言、系统功能模块详细设计、性能设计、系统出错处理设计、系统处理规定
3	V1.2	2024-10-30	施宇翔	施宇翔		修改系统出错处理设计、修改系统架构
						
 
目录
1引言	5
1.1编写目的	5
1.2面向读者	5
1.3参考材料	5
1.4 项目背景	6
1.5 项目目标	6
2系统总体设计	6
2.2整体功能架构	7
2.3整体技术架构	7
2.4设计目标	8
2.4.1总体原则	8
2.4.2实用性和先进性	8
2.4.3标准化、开放性、兼容性	9
2.4.4高可靠性、稳定性	9
2.4.5易用性	9
2.4.6灵活性和可扩展性	9
3系统功能模块详细设计	9
3.1 用户管理模块	9
3.2 行程推荐模块	10
3.3 路线规划模块	10
3.4 预算管理模块	10
3.5 天气信息模块	10
3.6 预约提醒模块	10
3.7 备忘录模块	10
4性能设计	11
4.1响应时间	11
4.2并发用户数	11
4.3 数据处理能力	11
5数据库设计	11
6接口设计	11
6.1登录接口	11
6.1.1调用说明	11
6.1.2请求报文	12
6.1.3应答报文	12
6.2行程推荐接口	12
6.2.1调用说明	12
6.2.2请求报文	12
6.2.3应答报文	13
6.3完整行程单生成接口	13
6.3.1调用说明	13
6.3.2请求报文	13
6.3.3应答报文	14
6.4备忘录功能接口	14
6.4.1调用说明	14
6.4.2请求报文	14
6.4.3应答报文	15
6.5短信验证接口	15
6.5.1调用说明	15
6.5.2请求报文	15
6.5.3应答报文	16
6.6第三方天气预报接口	17
6.6.1调用说明	17
6.6.2请求报文	17
6.6.3应答报文	17
6.7高德地图接口	18
6.7.1调用说明	18
6.7.2请求报文	18
6.7.3应答报文	18
6.8Kimi ai接口	19
6.8.1调用说明	19
6.8.2请求报文	19
6.8.3应答报文	19
7系统出错处理设计	20
7.1 出错信息	20
7.2 补救措施	20
7.3 系统维护设计	20
8系统处理规定	20
8.1输入输出要求	20
8.2数据管理能力要求	20
8.3故障处理要求	21
8.4其他专门要求	21

 
1引言
1.1编写目的
本说明书旨在详细描述“Man游”旅游规划应用的设计基础，明确系统的功能需求、技术规格及实现方式。通过本文件的编写，旨在为项目的开发、测试和验收提供清晰的指导，确保所有参与项目的人员对系统的业务逻辑、功能模块、数据结构等有统一的理解。该文档将作为设计与开发的依据、测试编写的指导，以及验收的关键标准。
1.2面向读者
本说明书主要面向以下读者：
项目经理：负责根据本需求文档制定项目计划、协调资源、跟踪进度，确保按时交付符合需求和质量标准的软件产品。
前后端开发人员：依据本需求文档中的功能需求和技术规格进行系统设计与开发，确保按时交付符合要求的软件功能。
测试人员：根据本需求文档中的功能需求和验收标准，设计测试用例并执行测试，确保软件功能和性能符合预期。
其他相关方：如市场调研人员、用户体验设计师、产品所有者等，需根据本需求文档的需求和目标，提供反馈和支持，确保产品符合市场需求和用户期望。
1.3参考材料
本项目的设计与开发将参考以下资料：
软件需求规格：计算机软件需求规格说明规范。
前端设计：Material Design 指南、Ant Design Vue 文档。
前端实现：uni-app 官方文档、Vue 3 官方文档、Vuex 文档、Vue Router 文档。
后端实现：Django 官方文档、Django REST framework 文档。
数据库管理：PostgreSQL 文档、Django ORM 文档。
安全性与隐私保护：Django 安全最佳实践指南、OWASP 指南、Python cryptography 库文档。
前后端交互：Axios 文档、WebSocket 文档。
测试和调试：Django 测试文档、Jest 文档、Chrome DevTools 文档。
1.4 项目背景
随着旅游市场的快速发展，用户对个性化、智能化的旅游规划需求日益增加。然而，当前市场上存在信息分散、模板化严重等问题，导致用户在制定旅游攻略时费时费力，难以高效地组织出行安排。Man游的目标是简化这一过程，提升用户体验，尤其是针对喜欢参考攻略、完全自主规划或懒于行前准备的不同类型旅行者。
1.5 项目目标
Man游旨在通过整合大语言模型、第三方平台的优质内容、实时天气预报等，提供个性化的旅游推荐和智能行程规划。项目的成功将为用户提供便捷的旅行体验，提升整体旅游满意度，并在市场中占据一席之地。
2系统总体设计
2.1整体架构

 
2.2整体功能架构
 
2.3整体技术架构

 
2.4设计目标
2.4.1总体原则
(1) 统一总体设计：遵循“统一设计、统一规划、统一实施，统一建设”的原则，加强规范化、标准化，确保各建设项目的实施过程符合总体架构设计。
(2) 符合标准要求：符合各项信息化建设要求，确保建设过程标准规范。
2.4.2实用性和先进性
采用先进成熟的技术满足用户使用需求，兼顾其他相关的管理需求，使整个系统在相当一段时期内保持技术的先进性，而不至于落后，以适应现代科技和信息化技术快速发展的大趋势和大方向。在保证系统先进性的前提下，也要充分考虑系统的实用性，毕竟只先进不实用的系统不是用户真正需要的，最大程度的满足用户建设需要、贴合用户使用需求，才能满足用户的实用性要求。
2.4.3标准化、开放性、兼容性
选择标准、开放的技术和应用标准，软件协议上真正实现开放，同时基于开放式标准，坚持统一规范的原则，实现标准化、模块化，从而为未来系统的开放、兼容、发展奠定基础。
2.4.4高可靠性、稳定性
业务系统的运行，高可靠性是第一位的。要对系统架构进行高可靠性的设计和建设。采用冗余、分布式、集群、热备等相关的技术手段，为整个系统的稳定运行保驾护航。
2.4.5易用性
系统建成后是否能让用户使用人员很快上手，这直接关系到系统的使用效率。因此，在系统建设中，必须坚持系统的易用性原则。在系统的操作和控制方式上，尽可能通过技术手段，使得操作人员可以快速掌握系统的使用。
2.4.6灵活性和可扩展性
考虑到未来业务的调整及快速发展，系统结构要层次化、模块化，易于未来应用的扩展。现代化的系统应该是一个不断发展、与时俱进的系统，所以它必须具有良好的灵活性和可扩展性，能够根据用户不断发展的业务需要，方便地进行调整和升级。
3系统功能模块详细设计
3.1 用户管理模块
功能：实现用户的注册、登录、信息管理。
界面原型展示：
 
3.2 行程推荐模块
功能：根据用户偏好和历史数据，提供个性化的行程推荐。
界面原型展示：
 
3.3 路线规划模块
功能：根据用户选择的景点，提供最优路线规划。
界面原型展示：
 
3.4 预算管理模块
功能：帮助用户管理旅行预算，记录支出。
界面原型展示：
 
3.5 天气信息模块
功能：提供实时天气预报，帮助用户合理安排行程。
界面原型展示： 
 
3.6 预约提醒模块
功能：根据用户的行程，自动检测是否需要预约并提醒用户。
界面原型展示： 
 
3.7 备忘录模块
功能：支持用户记录账单、设置旅行预算以及整理行李清单等。
界面原型展示： 
 
4性能设计
4.1响应时间
系统登录时间：不超过1秒。
页面请求时间：不超过2秒。
数据处理时间：不超过2秒。
4.2并发用户数
高峰期并发用户数：系统支持高峰期并发用户数达到30人。
4.3 数据处理能力
请求处理能力：系统应能处理每秒100条请求，确保在高并发情况下的稳定性。
5数据库设计
详见《数据库设计说明书》
6接口设计
6.1登录接口
6.1.1调用说明
前端ui调用后台的登录接口，通过登录接口让用户填写账号密码/验证码登录到本系统。
http请求方式	Post

6.1.2请求报文
参数	参数含义	数据类型	备注
user_name	用户名	string	必填（手机号）
password	密码	string	与验证码二选一
captcha	验证码	string	与密码二选一

6.1.3应答报文
参数	参数含义	数据类型	备注
Pass	状态码	Number	200为响应成功
Msg	状态信息	String	选填
Token	令牌	String	验证用户


6.2行程推荐接口
6.2.1调用说明
根据用户的旅游风格、种草文章和关键词提供个性化行程推荐。
http请求方式	Post
6.2.2请求报文
参数	参数含义	数据类型	备注
travel_style	旅游风格	String	选填
keywords	关键词	String	选填
content	种草文章	String	与location选填 url链接
location	目的地	String	与content选填
start_date	行程开始日期	String	必填、YYYY-MM-DD
duration	行程天数	Integer	必填
budget	预算	String	选填
dietary_preference	餐饮偏好	String	选填
6.2.3应答报文
参数	参数含义	数据类型	备注
itinerary	推荐行程	Array		包含每日行程安排的 JSON 数组
message	响应消息	String	接口的执行状态或提示信息
Code	状态码	Integer	例如200

6.3完整行程单生成接口
6.3.1调用说明
根据生成的行程安排以及交通信息和天气预报生成完整行程单
http请求方式	Post
6.3.2请求报文
参数	参数含义	数据类型	备注
itinerary	行程安排	Array	包含每一天的行程安排信息，必填
transport	交通	Array	高德api返回的内容，必填
Weather	天气	Array	天气api，必填


6.3.3应答报文
参数	参数含义	数据类型	备注
itinerary_plan	完整行程单	Array	包含每日的行程路线、交通、餐饮和天气预报
total_days	总行程天数	Integer	
message	响应消息	String	接口的执行状态或提示信息
Code	响应码	Integer	

6.4备忘录功能接口
6.4.1调用说明
用于用户记录并管理旅游预算、账单以及行李清单。
http请求方式	Post

6.4.2请求报文
参数	参数含义	数据类型	备注
bill_management	账单管理数据	Array	包含每笔账单的详细记录，用户填充
budget	预算设置数据	Float	用户设定的旅游总预算
packing_list	行李清单数据	Array	用户的行李清单

6.4.3应答报文
参数	参数含义	数据类型	备注
bill_records	账单记录	Array	返回所有记录的账单项目
budget_summary	预算概要	Object		包含总预算、已花费金额和剩余预算
packing_list	行李清单	Array	用户的行李清单，包含当前状态
message	响应消息	String	接口执行状态或提示信息
Code	响应码	Integer	

6.5短信验证接口
6.5.1调用说明
用于系统发送和验证用户的短信验证码
http请求方式	Post
6.5.2请求报文
（1）发送验证码
参数	参数含义	数据类型	备注
phone_number	手机号	String	目标用户的手机号码
request_type	请求类型	String	固定值为 "send_code"，表示发送验证码

（2）验证验证码
参数	参数含义	数据类型	备注
phone_number		手机号	String		用户的手机号码
verification_code	验证码	String	用户收到的短信验证码
request_type	请求类型		String	固定值为 "verify_code"，表示验证验证码

6.5.3应答报文
（1）发送验证码
参数	参数含义	数据类型	备注
success	是否成功	Boolean	验证码发送成功为 true，否则为 false
message	响应消息	String	接口执行状态或提示信息
Code	响应码	Integer	

（2）验证验证码
参数	参数含义	数据类型	备注
success	是否成功	Boolean	验证成功为 true，否则为 false
message	响应消息	String	接口执行状态或提示信息
Code	响应码	Integer	


6.6第三方天气预报接口
6.6.1调用说明
用于提供行程单中的每日天气预报信息
http请求方式	Post

6.6.2请求报文
参数	参数含义	数据类型	备注
city	城市编号	String	需要查询天气的城市编码。


6.6.3应答报文
参数	参数含义	数据类型	备注
status	状态	Integer	
count	数量	Integer	
info	返回信息	String	
Lives	天气内容	Array	
Lives.province	省份	String	
Lives.city	城市	String	
Lives.adcode	位置编码	String	
Lives.weather	天气	String	
Lives.temperature	温度	String	
Lives.·······	···	···	
6.7高德地图接口
6.7.1调用说明
用于提供行程单中的路线规划
http请求方式	Post
6.7.2请求报文
参数	参数含义	数据类型	备注
origin	起始点	String	lon,lat（经度,纬度），必填
destination	终点	String	lon,lat（经度,纬度），必填
extensions	是否基本信息	String	base:返回基本信息；all：返回全部信息
waypoints	途经点	String	最大数目：16个坐标点
····	···	···	···
6.7.3应答报文
参数	参数含义	数据类型	备注
status	状态	Integer	
count	数量	Integer	
info	返回信息	String	
Route	路线	Array	包含一系列所需要的路线
6.8Kimi ai接口
6.8.1调用说明
用于生成用户需求的旅游规划
http请求方式	Post
6.8.2请求报文
参数	参数含义	数据类型	备注
model	模型选择	String	必填
messages	消息列表	List[Dict]	必填
temperature	采样温度	float	默认为 0，如果设置，值域须为 [0, 1] 我们推荐 0.3
response_format	输出具体格式	object	 {"type": "text"}
···	···	···	···
6.8.3应答报文
参数	参数含义	数据类型	备注
id	唯一标识	String	
object	内容	String	例如chat.completion
created	创建数量	String	例如1698999496
model	模型选择	String	moonshot-v1-8k
choices	生成内容	List[Dict]	
usage	Token计算	Dict	

7系统出错处理设计
7.1 出错信息
系统在用户使用过程中出现错误时，需提供明确的错误提示信息，帮助用户理解问题所在
7.2 补救措施
反馈渠道：用户可以通过应用内反馈功能报告问题，开发团队将及时处理。
自动错误报告：系统应具备自动收集和报告错误的功能，减少用户负担
7.3 系统维护设计
系统应记录所有错误信息，包括时间戳、错误类型、用户ID等，以便后续分析和改进。
对错误进行分类，并根据其对系统影响的程度设定优先级，以便开发团队能够优先处理严重影响用户使用的错误。
定期对系统进行检查和更新，以修复已知的错误和漏洞，提高系统的稳定性和安全性
8系统处理规定
8.1输入输出要求
输入数据有效性：
系统应确保所有输入数据的格式和内容有效，避免无效数据导致的错误。
输出数据格式：
系统输出的数据应符合预期格式，确保用户能够清晰理解。
8.2数据管理能力要求
定期备份：
系统应具备定期备份和恢复数据的能力，确保数据安全，防止数据丢失。
数据一致性：
在数据操作过程中，系统应确保数据的一致性，避免出现脏数据。
8.3故障处理要求
自动监测机制：
系统应具备自动监测和报警机制，及时发现并处理故障，确保系统的高可用性。
用户通知：
在发生故障时，系统应及时通知用户，并提供相应的解决方案或建议。
8.4其他专门要求
数据加密：
系统应对敏感数据进行加密处理，确保用户信息的安全性。
权限管理：
系统应实施严格的权限管理，确保用户只能访问其有权访问的数据和功能。


